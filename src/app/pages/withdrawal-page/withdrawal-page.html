<div class="container mt-4">

  <div class="row shadow p-3 mb-3 bg-body rounded">

    <h1>Test ATM withdraw</h1>
    <h3>Available money in ATM: {{ atmTotalAmout | currency:'MXN' }}</h3>

    <div class="mb-3">
      <hr>

      <label for="amout" class="form-label">Amount to `</label>
      <input type="number" class="form-control" id="amout" [(ngModel)]="amount">
      <button type="button" class="btn btn-outline-dark mt-3" (click)="withdraw()">Withdraw</button>

    </div>

    <p>{{ message }}</p>

    @if (result?.ok == true) {
      <div class="alert alert-success" role="alert">
        <h3>Bills and coins delivered:</h3>
        <ul>
          @for (bill of result?.bills; track $index) {
            <li>
              {{ bill.quantity }}  x {{ bill.denomination |currency:'MXN'}} ({{bill.type}})
              @if( bill.type == 'Coin') {
                <i class="fa-solid fa-coins"></i>
              } @else if (bill.type == 'Bill') {
                <i class="fa-solid fa-money-bill-wave"></i>
              }
            </li>
          }
        </ul>
      </div>
    } @else if (result?.ok == false){
      <div class="alert alert-danger" role="alert">
        {{result?.msg}}
      </div>
    }
  </div>


  <div class="row shadow p-3 mb-5 bg-body rounded">

      <h3>ATM Inventory</h3>

      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Currency</th>
            <th scope="col">Denomination</th>
            <th scope="col">Currency quantity</th>
          </tr>
        </thead>
        <tbody>
          @for (item of inventory; track $index) {
            <tr>
              <td>{{$index + 1}}</td>
              <td>{{ item.type }}</td>
              <td>{{ item.denomination | currency: 'MXN' }}</td>
              <td>
                <span class="badge" [class]="{'bg-dark' : item.quantity > 0, 'bg-danger': item.quantity == 0}">
                  {{ item.quantity }}
                </span>
              </td>
            </tr>
          }
        </tbody>
      </table>
  </div>

</div>
